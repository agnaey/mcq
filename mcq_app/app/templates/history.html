{% extends 'base.html' %}
{% load static %}
{% block content %}

<main class="container py-5">
<h2>MCQ History</h2>

{% if history_data %}
    {% for record in history_data %}
<div class="history-card" style="border:1px solid #ccc; padding:15px; margin-bottom:20px; border-radius:5px; background:#f5f5f5; position:relative;">

    <!-- DELETE BUTTON -->
    <a href="{% url 'delete_history' record.id %}" 
       onclick="return confirm('Delete this entry?')"
       style="position:absolute; top:10px; right:10px; color:red; font-size:20px;">
        <i class="fa fa-trash"></i>
    </a>

    <p><strong>Input Text:</strong> {{ record.input_text }}</p>


        {% if record.mcqs %}
            {% for mcq in record.mcqs %}
            <div style="margin-bottom:10px;">
                <p><strong>Q{{ forloop.counter }}:</strong> {{ mcq.question }}</p>
                {% if mcq.options %}
                    <ul style="margin-left:20px;">
                        {% for option in mcq.options %}
                        <li>{{ option }}</li>
                        {% endfor %}
                    </ul>
                    
                {% endif %}
                <p style="font-weight:600;">Answer: {{ mcq.correct_answer }}</p>
            </div>
            
            {% endfor %}
        {% else %}
            <p>No MCQs generated for this input.</p>
        {% endif %}


    </div>
    {% endfor %}
{% else %}
    <p>No history yet.</p>
{% endif %}



</main>

{% endblock %}
